# 📋 PRD: カリタス中学校 AI試験対策ツール

## 🎯 プロダクト概要

### プロダクト名
**カリタス中学校 AI試験対策ツール**（完全AI搭載版）

### ビジョン
AIを活用した個別最適化学習により、カリタス中学校・高等学校の生徒の学習効果を最大化し、体系数学・Progress 21カリキュラムに完全準拠した高品質な学習体験を提供する。

### ミッション
- **個別最適化**: 各生徒のレベルに応じたAI問題生成
- **効率的学習**: 7段階詳細解説による深い理解促進
- **完全準拠**: 学校カリキュラムとの100%整合性
- **継続学習**: PWA対応によるいつでもどこでも学習可能

## 👥 ターゲットユーザー

### プライマリーユーザー
- **カリタス中学校生徒**（中1〜中3）
- **カリタス高等学校生徒**（高1）
- **年齢**: 12歳〜16歳
- **デバイス**: スマートフォン、タブレット、PC

### セカンダリーユーザー
- **教師**: 問題プール管理、学習進捗確認
- **保護者**: 学習状況モニタリング（将来機能）

### ユーザーペルソナ

#### ペルソナ1: 中学2年生 田中さん
- **背景**: 数学が苦手、定期テスト対策に困っている
- **ニーズ**: 基礎から段階的に理解したい、詳しい解説が欲しい
- **利用シーン**: 帰宅後の自宅学習、テスト前の集中学習

#### ペルソナ2: 中学3年生 佐藤くん
- **背景**: 数学は得意、より高度な問題に挑戦したい
- **ニーズ**: 発展問題、入試レベルの応用問題
- **利用シーン**: 通学時間、休み時間での学習

## 🎯 プロダクトゴール・KPI

### ビジネスゴール
1. **学習効果向上**: 定期テスト平均点15%向上
2. **学習継続率**: 月間アクティブユーザー80%以上
3. **満足度**: ユーザー満足度4.5/5.0以上
4. **カリキュラム準拠**: 100%完全準拠維持

### KPI（重要成功指標）

#### 学習効果指標
- **問題解答数**: 月間平均解答数 > 100問/ユーザー
- **継続率**: 週間アクティブユーザー > 70%
- **学習時間**: 平均セッション時間 > 15分
- **理解度**: 正解率向上推移 > 月間5%向上

#### 技術指標
- **レスポンス時間**: 平均API応答時間 < 3秒
- **エラー率**: システムエラー発生率 < 1%
- **稼働率**: サーバー可用性 > 99.9%
- **パフォーマンス**: Core Web Vitals すべて緑

#### ユーザー体験指標
- **Net Promoter Score (NPS)**: > 50
- **タスク完了率**: > 95%
- **学習完了率**: セッション完了率 > 85%

## 💡 プロダクト価値提案

### 競合優位性
1. **完全カリキュラム準拠**: 体系数学・Progress 21との100%整合性
2. **AI個別最適化**: GPT-4による高品質問題生成
3. **7段階詳細解説**: 思考プロセス完全再現
4. **問題プール + AI**: 即時取得とオーダーメイドの両立
5. **PWA対応**: ネイティブアプリライクな体験

### ユーザーベネフィット
- **効率的学習**: 個人レベルに最適化された問題提供
- **深い理解**: 省略なしの詳細解説による概念理解
- **柔軟な学習**: いつでもどこでも利用可能
- **進捗可視化**: 学習状況の明確な把握

## 🔧 機能要件

### Core Features（V1.0）

#### 1. 数学学習システム
```
✅ 実装済み
- AI問題生成（OpenAI GPT-4）
- 7段階詳細解説システム
- 問題プール管理
- 学年・単元・難易度選択
- 学習進捗追跡

対象範囲:
- 中1: 正負の数、文字式、一次方程式、比例・反比例
- 中2: 式の計算、連立方程式、一次関数、図形の性質、確率、三平方の定理
- 中3: 式の展開・因数分解、平方根、二次方程式、二次関数、図形の相似
- 高1: 数と式、集合と命題、二次関数、図形と計量
```

#### 2. 英語学習システム
```
✅ 部分実装済み
- AI英単語生成（Progress 21準拠）
- 語源・発音・例文付き学習
- レベル別出題

🔄 開発中
- 4択問題システム
- 穴埋め問題機能
- 翻訳選択問題
```

#### 3. 管理システム
```
✅ 実装済み
- 問題プール管理画面
- AI問題一括生成（1〜20問）
- 統計情報表示
- 問題品質チェック
```

### Enhanced Features（V2.0 - 開発予定）

#### 1. 適応学習システム
- 弱点分析・推奨機能
- 学習計画自動生成
- 個別最適化AI

#### 2. 協働学習機能
- クラス管理機能
- 教師ダッシュボード
- 学習データ分析

#### 3. 高度なAI機能
- 自然言語での質問対応
- 画像・図形問題対応
- 音声読み上げ機能

## 🏗️ 技術要件

### フロントエンド技術スタック
```
- React 18: コンポーネントベース開発
- Tailwind CSS: ユーティリティファーストCSS
- Babel: JSX変換
- PWA: Service Worker実装（計画中）
```

### バックエンド技術スタック
```
- Express.js: Node.js Webフレームワーク
- OpenAI API: GPT-4による問題生成
- CORS & Helmet: セキュリティ対策
- 問題プールシステム: JSON Database
```

### 開発・テスト環境
```
- Jest: テストフレームワーク
- Supertest: HTTPアサーション
- 3層テスト: Unit・Integration・E2E
- Nodemon: 開発用ホットリロード
```

### デプロイ・インフラ
```
- Vercel: フロントエンド・サーバーレス
- Node.js ≥ 18.0.0
- Docker対応: コンテナ化サポート（計画中）
```

## 🎨 UI/UX要件

### デザイン原則
1. **レスポンシブデザイン**: スマホ・タブレット・PC対応
2. **直感的操作**: 中高生が迷わないシンプル設計
3. **学習効率重視**: 最短距離での問題アクセス
4. **視覚的フィードバック**: 進捗・成果の可視化

### カラーパレット
```css
:root {
  --primary-blue: #3B82F6;     /* メイン */
  --secondary-purple: #8B5CF6; /* アクセント */
  --success-green: #10B981;    /* 成功・正解 */
  --warning-orange: #F59E0B;   /* 注意・応用 */
  --error-red: #EF4444;        /* エラー・発展 */
  --neutral-gray: #6B7280;     /* テキスト */
  --background-light: #F9FAFB; /* 背景 */
}
```

### モバイルファースト設計
- **画面解像度**: 320px〜1920px対応
- **タッチ操作**: 44px以上のタップターゲット
- **読み込み速度**: 3G環境でも3秒以内表示

## 📊 データ要件

### 問題プール データ構造
```json
{
  "math": {
    "学年": {
      "単元": {
        "難易度": [
          {
            "id": "問題ID",
            "grade": "学年",
            "unit": "単元名",
            "level": "難易度",
            "problem": "問題文",
            "steps": [
              {
                "step": "ステップ名",
                "content": "内容",
                "explanation": "解説",
                "detail": "詳細"
              }
            ],
            "answer": "解答",
            "hint": "ヒント",
            "difficulty_analysis": "難易度分析",
            "learning_point": "学習ポイント",
            "created_at": "作成日時"
          }
        ]
      }
    }
  }
}
```

### 学習履歴 データ構造
```javascript
{
  "mathProgress": {
    "solved": "解答済み問題数",
    "totalTime": "累計学習時間",
    "byGrade": "学年別進捗",
    "byUnit": "単元別進捗",
    "accuracy": "正解率推移"
  },
  "englishProgress": {
    "words": "学習済み単語数",
    "accuracy": "正解率",
    "streaks": "連続正解記録"
  }
}
```

## 🔒 セキュリティ要件

### セキュリティ対策
- **Helmet.js**: セキュリティヘッダー設定
- **CORS設定**: 適切なオリジン制御
- **入力値検証**: XSS・インジェクション対策
- **API制限**: レート制限・タイムアウト設定

### プライバシー保護
- **ローカルストレージ**: 個人データは端末内保存
- **API通信**: HTTPS必須
- **ログ管理**: 個人情報を含まないログ設計

## ⚡ パフォーマンス要件

### 応答時間要件
- **API応答**: < 3秒（AI生成時）
- **問題プール取得**: < 1秒
- **画面遷移**: < 500ms
- **初回読み込み**: < 5秒

### 最適化戦略
- **Compression**: gzip圧縮
- **キャッシュ戦略**: 効率的なデータ取得
- **コード分割**: 遅延読み込み実装
- **画像最適化**: WebP形式、レスポンシブ画像

## 🧪 品質要件

### テスト戦略
```
テスト構成:
├── Unit Tests (80%カバレッジ目標)
│   ├── ユーティリティ関数
│   ├── データ処理ロジック
│   └── API関数
├── Integration Tests
│   ├── API エンドポイント
│   ├── データベース操作
│   └── 外部サービス連携
└── E2E Tests
    ├── ユーザーフロー
    ├── ブラウザ互換性
    └── レスポンシブ対応
```

### 品質管理指標
- **応答時間**: API < 3秒
- **可用性**: 99.9%以上
- **エラー率**: < 1%
- **ユーザビリティ**: A/Bテスト継続実施

## 🚀 リリース計画

### Phase 1: MVP（完了）✅
- AI問題生成システム
- 問題プール管理
- 数学詳細解説（7段階）
- 英単語学習基盤

### Phase 2: 英語機能拡充（進行中）🔄
- 4択問題システム実装
- 穴埋め問題機能
- 翻訳選択問題
- 英日両方向対応

### Phase 3: 高度な学習機能（計画中）📋
- 適応学習システム
- 弱点分析・推奨機能
- 学習計画自動生成
- 成績レポート機能

### Phase 4: 協働学習・管理（計画中）📋
- クラス管理機能
- 教師ダッシュボード
- 学習データ分析
- 保護者向けレポート

### Phase 5: AI高度化（計画中）📋
- 個別最適化AI
- 自然言語での質問対応
- 画像・図形問題対応
- 音声読み上げ機能

## 📈 成功指標・測定方法

### ユーザー行動指標
- **DAU/MAU比率**: > 0.3（毎日利用するユーザーの割合）
- **セッション継続率**: > 85%
- **リテンション率**: 
  - 1日後: > 70%
  - 7日後: > 40%
  - 30日後: > 20%

### 学習効果指標
- **問題正解率**: 初回 vs 復習時の向上率
- **学習時間**: 平均セッション時間の推移
- **カリキュラム進捗**: 学年別完了率

### ビジネス指標
- **ユーザー獲得**: 月間新規ユーザー数
- **ユーザー満足度**: アプリストア評価、NPS
- **機能利用率**: 各機能の使用頻度

## 🚨 リスク・制約事項

### 技術リスク
1. **AI API依存**: OpenAI APIの可用性・料金変動
   - **対策**: 複数AIプロバイダー対応、ローカル問題プール拡充

2. **スケーラビリティ**: ユーザー数増加時の性能
   - **対策**: CDN導入、サーバー負荷分散

3. **モバイル対応**: 多様なデバイス・ブラウザ対応
   - **対策**: クロスブラウザテスト、プログレッシブエンハンスメント

### ビジネスリスク
1. **カリキュラム変更**: 学校カリキュラムの改訂
   - **対策**: 柔軟な問題管理システム、定期的な内容レビュー

2. **競合参入**: 類似サービスの登場
   - **対策**: 継続的な機能改善、ユーザー体験向上

### 運用リスク
1. **データ保護**: 学習データの安全性
   - **対策**: ローカルストレージ活用、最小限のデータ収集

2. **サポート体制**: ユーザーサポートの負荷
   - **対策**: FAQ充実、自動化可能な問い合わせの仕組み化

## 📞 サポート・メンテナンス

### 運用・保守計画
- **監視**: リアルタイム性能監視
- **バックアップ**: 問題プール定期バックアップ
- **更新**: セキュリティパッチ適用
- **サポート**: ユーザーフィードバック対応

### アップデート戦略
- **月次**: 機能改善・バグ修正
- **学期毎**: 大型機能追加
- **年次**: 技術スタック更新

---

## 📝 承認・レビュー

| 役割 | 担当者 | 承認日 | サイン |
|------|--------|--------|--------|
| プロダクトマネージャー | - | - | - |
| 技術リード | - | - | - |
| UI/UXデザイナー | - | - | - |
| QAリード | - | - | - |

---

**最終更新**: 2025年7月2日  
**文書バージョン**: v1.0  
**次回レビュー予定**: 2025年9月1日

---

*このPRDは、カリタス中学校AI学習ツールの包括的なプロダクト要求仕様書です。プロダクトの方向性、機能要件、品質基準を明確に定義し、開発チーム全体での認識統一と高品質なプロダクト開発を支援します。*